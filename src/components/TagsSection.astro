---
---

<ul id="random-tags" class="flex flex-wrap gap-x-3 gap-y-4 my-5"></ul>

<script>
  async function loadRandomTags() {
    try {
      const res = await fetch('/tags.json', { headers: { 'cache-control': 'no-cache' } })
      if (!res.ok) return
      const data = await res.json()
      const list = document.getElementById('random-tags')
      if (!list) return
      const tags = Array.isArray(data?.tags) ? data.tags : []
      const pick = (arr, n) => {
        const copy = [...arr]
        for (let i = copy.length - 1; i > 0; i--) {
          const j = Math.floor(Math.random() * (i + 1))
          ;[copy[i], copy[j]] = [copy[j], copy[i]]
        }
        return copy.slice(0, n)
      }
      const chosen = pick(tags, 9)
      list.innerHTML = chosen
        .map(
          (t) => `
          <li>
            <a href="${t.href}"
               class="flex gap-2.5 py-2 pl-4 pr-3 bg-accent/7 rounded-3xl border-transparent hover:border-accent/20 border-1">
              ${t.tag}
              <span class="rounded-full bg-foreground/7 text-primary px-2 py-1 text-xs font-semibold">
                ${t.count}
              </span>
            </a>
          </li>`,
        )
        .join('')
    } catch {}
  }
  loadRandomTags()
  document.addEventListener('visibilitychange', () => {
    if (document.visibilityState === 'visible') loadRandomTags()
  })
  window.addEventListener('pageshow', loadRandomTags)
  window.addEventListener('focus', loadRandomTags)
  
</script>
